# M7.5: External TestFlight Setup - Outline

**Component**: M7.5 - External TestFlight Setup  
**Parent Milestone**: M7 - CloudKit Sync, Household Sharing & External TestFlight  
**Version**: 1.0 - Outline  
**Created**: December 21, 2025  
**Status**: â³ PLANNED (After M7.4)  
**Estimated Duration**: 2-3 hours (+ 24-48h Apple review wait)  
**Prerequisites**: M7.0 Complete âœ…, M7.1-M7.4 Complete âœ…

---

## ğŸ¯ Purpose

Configure external TestFlight testing group and submit app for Apple App Review to enable public beta distribution via shareable link.

**âš ï¸ CRITICAL**: M7.0 prerequisites MUST be complete before starting M7.5. See validation checklist below.

---

## ğŸ“‹ Phase Overview

### **M7.5.1: External Testing Group Creation (30 min)**

**Goal**: Set up external testing infrastructure in App Store Connect

**Tasks:**
1. Log into App Store Connect
2. Navigate to TestFlight â†’ External Testing
3. Create new external testing group:
   - Name: "Public Beta Testers"
   - Enable public link
4. Configure group settings:
   - Test information template
   - Feedback email
   - Public link settings

**Deliverables:**
- External testing group created
- Public link enabled (not yet active)

---

### **M7.5.2: Build Submission for External Review (1 hour)**

**Goal**: Submit build to Apple App Review for external testing approval

**Tasks:**

**1. Archive Build**
- Xcode â†’ Product â†’ Archive
- Ensure Release configuration
- Verify all signing is correct

**2. Upload to App Store Connect**
- Distribute App â†’ App Store Connect
- Upload with automatic signing

**3. Complete External Testing Metadata**

Required fields:
```
App Name: Forager: Smart Meal Planner
Subtitle: Grocery & Meal Planning
What to Test: 
  "Please test the household sharing feature:
   1. Create a household in Settings
   2. Invite a family member via their iCloud email
   3. Verify you both see the same grocery lists and recipes
   4. Add items to lists and confirm sync works
   
   Also test general grocery list and recipe management."

Feedback Email: [your-email]
Privacy Policy URL: [from M7.0.1]
```

**4. Submit for Review**
- Select build
- Attach to external testing group
- Submit

**Deliverables:**
- Build uploaded to App Store Connect
- External testing metadata complete
- Submitted for Apple App Review

---

### **M7.5.3: Pre-Submission Validation Checklist (1-1.5 hours)**

**Goal**: Ensure all Apple requirements met before submission

**âš ï¸ MANDATORY CHECKS - Complete ALL before submission:**

**A. Privacy & Compliance (M7.0)**
```
âœ… Privacy policy published at public URL
âœ… Privacy policy URL in App Store Connect
âœ… In-app privacy policy link working (Settings â†’ tap opens policy)
âœ… App Privacy questionnaire shows "Complete" status
âœ… Privacy policy accurately reflects current data usage
   - Local storage: YES
   - iCloud sync: YES  
   - Third-party sharing: NO
   - Analytics: NO (unless added)
```

**B. Branding & Metadata (M7.0)**
```
âœ… Display name: "Forager: Smart Meal Planner" (disambiguated)
âœ… Bundle name: "Forager" (home screen label)
âœ… App icon clearly grocery/meal-themed (NOT pixel art game)
âœ… App Store description emphasizes grocery & meal planning
âœ… Screenshots show: Lists, Recipes, Meal Plans, Settings
âœ… No mention of unimplemented features
```

**C. Technical Configuration**
```
âœ… CloudKit capabilities enabled AND actively used
âœ… Household sharing working (tested on 2+ devices)
âœ… No unused capabilities enabled
âœ… Info.plist icons configured via asset catalog
âœ… No missing NS*UsageDescription strings
```

**D. Functional Quality Assurance**
```
âœ… Fresh install tested on 2+ physical devices
âœ… App launches quickly (< 2s)
âœ… Core workflow works: Create list â†’ Add items â†’ Sync â†’ Check off
âœ… Household sync tested: iPhone â†” iPad within 5 seconds
âœ… No crashes: deleting data, editing items, rapid taps, offline sync
âœ… No debug UI visible (no "TODO", test buttons, etc.)
âœ… No console logs with sensitive data
```

**E. Metadata Accuracy**
```
âœ… Description only promises features in THIS build
âœ… Household sharing described accurately
âœ… "What to Test" section specific and honest
âœ… No promises of future features (AI, nutrition tracking, etc.)
```

**F. M7.1-M7.4 Validation**
```
âœ… M7.1: CloudKit sync working (verified in CloudKit Dashboard)
âœ… M7.2: Household sharing operational (2+ members tested)
âœ… M7.3: Conflict resolution implemented
âœ… M7.4: Sync status visible to users
```

**If ANY checkbox unchecked â†’ DO NOT SUBMIT**

---

### **M7.5.4: Public Link Generation (30 min)**

**Goal**: Generate and test public TestFlight link after Apple approval

**Timeline:**
- Submit build: Day 1
- Apple reviews: 24-48 hours typically
- Approval notification: Email from Apple
- Generate link: Same day as approval

**Tasks After Approval:**

1. Receive approval email from Apple
2. Log into App Store Connect
3. TestFlight â†’ External Testing â†’ "Public Beta Testers" group
4. Click "Public Link"
5. Copy public TestFlight link
6. Test link on non-team device:
   - Open link in Safari
   - Tap "View in TestFlight"
   - TestFlight app opens
   - Tap "Install"
   - Verify installation works

**Deliverables:**
- Public TestFlight link active
- Link tested and working
- Installation instructions prepared

---

## ğŸš¨ Common Rejection Reasons & Prevention

**Rejection Reason #1: Privacy Policy Missing/Inaccessible**
- Prevention: M7.0.1 + M7.0.2 complete
- Verify: Tap privacy link in Settings before submission

**Rejection Reason #2: App Name Similarity**
- Prevention: M7.0.4 complete ("Forager: Smart Meal Planner")
- Verify: Display name clearly different from existing apps

**Rejection Reason #3: CloudKit Not Working**
- Prevention: Test household sharing on 2+ devices
- Verify: Actually test sync, don't just enable capability

**Rejection Reason #4: Incomplete App Privacy**
- Prevention: M7.0.3 complete
- Verify: "Complete" status in App Store Connect

**Rejection Reason #5: Crashes or Major Bugs**
- Prevention: Fresh install testing
- Verify: Core workflows work perfectly

---

## âœ… Acceptance Criteria

**M7.5 Complete When:**

**Submission:**
- âœ… External testing group created
- âœ… Build uploaded to App Store Connect
- âœ… External testing metadata complete
- âœ… ALL M7.5.3 checklist items verified
- âœ… Submitted for Apple App Review

**After Apple Approval:**
- âœ… Build approved by Apple (24-48h)
- âœ… Public TestFlight link generated
- âœ… Link tested on non-team device
- âœ… Installation confirmed working
- âœ… No App Store guidelines violations

**Quality:**
- âœ… Zero crashes in testing
- âœ… All M7.0 requirements met
- âœ… Household sharing working perfectly
- âœ… Professional quality throughout

---

## ğŸ“… Timeline Expectations

**Day 1 (M7.5.1-M7.5.3):** 
- Complete checklist
- Create external group
- Submit build
- **Wait begins**

**Day 2-3 (Apple Review):**
- Apple reviews submission
- May request additional info
- **Continue with M7.6 during wait**

**Day 3-4 (Approval):**
- Receive approval email
- Generate public link
- Test installation
- **Ready for public beta!**

**Total Calendar Time:** 3-4 days (including wait)

---

## ğŸ”— References

- [M7 PRD](milestone-7-cloudkit-sync-external-testflight.md) - M7.5 detailed section
- [M7.0 Prerequisites](milestone-7-cloudkit-sync-external-testflight.md#m70-app-store-prerequisites-2-3-hours--mandatory) - Required before M7.5
- [App Store Review Guidelines](https://developer.apple.com/app-store/review/guidelines/)
- [TestFlight External Testing](https://developer.apple.com/testflight/)

---

## ğŸ’¡ Pro Tips

**Before Submitting:**
1. Test on FRESH INSTALL (delete app, reinstall)
2. Test on device WITHOUT development profile
3. Have someone ELSE test core workflow
4. Read rejection emails carefully (they're specific)
5. If rejected, fix and resubmit quickly (no penalties)

**During Apple Review:**
1. Don't submit updates (wait for approval first)
2. Monitor email for Apple questions
3. Respond to questions within 24h
4. Work on M7.6 (landing page) during wait

**After Approval:**
1. Test public link BEFORE announcing
2. Prepare welcome email for testers
3. Have feedback collection process ready
4. Monitor crash reports in TestFlight

---

**Status**: â³ Outline Complete - Ready to execute after M7.4  
**Critical**: M7.0 prerequisites MANDATORY before starting M7.5  
**Next**: M7.4 completion â†’ M7.5 execution â†’ Apple review â†’ M7.6
